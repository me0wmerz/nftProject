<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pair Up - Recipes</title>
</head>
<body>
  <!-- This is just a placeholder to see the interactions with JavaScript -->
  <!-- This is for the food -->
  <form>
    <label for="ingredientSearch">What ingredients do you have?</label><br><br>
    <input type="text" name="ingredientSearch"><br><br>
    <input type="submit" id="search" value="Submit">
  </form>
  <h2 id=foodName>Food Name</h2>
  <h4>Food ingredients</h4>
  <h5 id=foodIngredient class=foodIngredient>Listed below:</h5>
  <h5 id=foodInstructions>Instructions:</h5>
  <h5 id=foodNutrition>Nutritional Info: </h5>
  <!-- This is for the drink -->
  <h2 id=drinkName>Cocktail Name</h2>
  <h4>Cocktail ingredients</h4>
  <h5 id=cocktailIngredient class=cocktailIngredient>Listed below:</h5>
  <h5 id=drinkInstructions>Instructions:</h5>



  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<script>
 // API for recipes
  document.getElementById("search").addEventListener("click", event => {
    event.preventDefault()

    let userIngredients
 
 
    axios.get(`https://api.spoonacular.com/recipes/complexSearch?apiKey=3f5180d6774b495eb794eb02a08d8db6&instructionsRequired=true&addRecipeInformation=true&addRecipeNutrition=true&includeIngredients=${userIngredients}=10`)
      .then(res => {
        console.log(res)
        for (let indexRecipe = 0; indexRecipe < 9; indexRecipe++) {
          let foodInfo = res.data.results[indexRecipe]
          console.log(foodInfo.title)
          console.log(foodInfo.image)
          console.log(foodInfo.summary)
          console.log(foodInfo.readyInMinutes)
          console.log(foodInfo.servings)
          //displays all cuisine types in array (below)
          let cuisineTypes = foodInfo.cuisines.join(", ")
          document.getElementById('foodName').innerHTML = `
            <h2>${foodInfo.title}</h2>
            <img src=${foodInfo.image} alt=${foodInfo.title} picture" width="250">
            <br>
            <h4>Ready In: ${foodInfo.readyInMinutes} Servings: ${foodInfo.servings} Cuisine: ${foodInfo.cuisines}
            <h5>${foodInfo.summary}
            `
            document.getElementById('foodName').value = ''
          //displays all steps in cooking instructions (below)
          let totalStepInstructions = ""
          let instructions = foodInfo.analyzedInstructions[0].steps
          instructions.forEach ((instructionSteps) => {
            totalStepInstructions += instructionSteps.step
          })
          console.log(totalStepInstructions)

          //for loop to retrieve all ingredients
          let ingredientInfo = foodInfo.nutrition.ingredients

          let ingredientList = []
          ingredientInfo.forEach((ingredientDetails) => {
            ingredientList.push(" " + ingredientDetails.amount + " " + ingredientDetails.unit + " " + ingredientDetails.name)
            
          })
          console.log(ingredientList)
          //setting inner HTML for ingredients
          document.getElementById("foodIngredient").innerHTML = `
          <ul>${ingredientList}</ul>
          `
          document.getElementById('foodIngredient').value = ''

          //setting inner HTML for instructions
          document.getElementById("foodInstructions").innerHTML = `
          <h4>${totalStepInstructions}</h4>
          `
          document.getElementById('foodInstructions').value = ''

          //setting inner HTML for nutrition -- ***NOT DONE YET***
          let nutritionInfo = foodInfo.nutrition.nutrients
          console.log("ping" + nutritionInfo[0].name + ": " + nutritionInfo[0].amount)
          console.log("ping" + nutritionInfo[8].name + ": " + nutritionInfo[8].amount)
          console.log("ping" + nutritionInfo[3].name + ": " + nutritionInfo[3].amount)
          document.getElementById("foodNutrition").innerHTML = `
          <h3>${nutritionInfo[0].name}: ${nutritionInfo[0].amount}</h3>
          <h3>${nutritionInfo[8].name}: ${nutritionInfo[8].amount}</h3>
          <h3>${nutritionInfo[3].name}: ${nutritionInfo[3].amount}</h3>
          `
        
        }
      })
      .catch(err =>
        console.log(err))

  document.getElementById('foodName').value = ''
  document.getElementById('foodIngredient').value = ''
  document.getElementById('foodInstructions').value = ''
  document.getElementById('foodNutrition').value = ''
  // FOR USE LATER -- // document.getElementById('recipe').innerHTML = "No recipe found - please try other ingredients"   
  })

//  API for cocktails
    axios.get(`https://www.thecocktaildb.com/api/json/v1/1/random.php`)
      .then(res => {
      console.log(res)
      const drinkInfo = res.data.drinks[0]
      document.getElementById('drinkName').innerHTML = `
      <h2>${drinkInfo.strDrink}</h2>
      <img src=${drinkInfo.strDrinkThumb} alt=${drinkInfo.strDrink} pic" width="250" >
      `

          
      //setting array of objects for key/value pair since API does not format it in such a way
      let drinkList = [
        {measure: drinkInfo.strMeasure1,
        ingredient: drinkInfo.strIngredient1
        },
        {measure: drinkInfo.strMeasure2,
        ingredient: drinkInfo.strIngredient2
        },
        {measure: drinkInfo.strMeasure3,
        ingredient: drinkInfo.strIngredient3
        },
        {measure: drinkInfo.strMeasure3,
        ingredient: drinkInfo.strIngredient3
        },
        {measure: drinkInfo.strMeasure4,
        ingredient: drinkInfo.strIngredient4
        },
        {measure: drinkInfo.strMeasure5,
        ingredient: drinkInfo.strIngredient5
        },
        {measure: drinkInfo.strMeasure6,
        ingredient: drinkInfo.strIngredient6
        },
        {measure: drinkInfo.strMeasure7,
        ingredient: drinkInfo.strIngredient7
        },
        {measure: drinkInfo.strMeasure8,
        ingredient: drinkInfo.strIngredient8
        },
        {measure: drinkInfo.strMeasure9,
        ingredient: drinkInfo.strIngredient9
        },
        {measure: drinkInfo.strMeasure10,
        ingredient: drinkInfo.strIngredient10
        },
        {measure: drinkInfo.strMeasure11,
        ingredient: drinkInfo.strIngredient11
        },
        {measure: drinkInfo.strMeasure12,
        ingredient: drinkInfo.strIngredient12
        },
        {measure: drinkInfo.strMeasure13,
        ingredient: drinkInfo.strIngredient13
        },
        {measure: drinkInfo.strMeasure14,
        ingredient: drinkInfo.strIngredient14
        },
        {measure: drinkInfo.strMeasure15,
        ingredient: drinkInfo.strIngredient15
        }       
      ]

      drinkList.forEach((cocktailIngredient, i) => {
        const drinkElem = document.createElement('p')
        drinkElem.className = "cocktailIngredient"

        if (cocktailIngredient.measure) {
          drinkElem.innerHTML = `
          <li>${cocktailIngredient.measure} ${cocktailIngredient.ingredient}</li>
          `
          document.getElementById("cocktailIngredient").append(drinkElem)
        }
      })



      //set inner HTML to the instructions given on drink API

      console.log(drinkInfo.strInstructions)
      document.getElementById('drinkInstructions').innerHTML = `
      <h4>${drinkInfo.strInstructions}</h4>
      `
        })
      .catch(err =>
        console.log(err))


  </script>
</body>
</html>